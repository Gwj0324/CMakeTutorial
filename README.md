# CMake官方教程-中文翻译

## 简介

CMake是一个管理构建源代码的工具。起初，CMake是被设计当做各种各样的Makefile方言的生成器。现在，CMake可以生成`Ninja`等现代构建系统，还可以生成Visual Studio、Xcode等IDE的项目文件。

- 第一步：起点

  - 练习1-构建一个项目

- 第二步：添加库
- 第三步：添加库的使用要求
- 第四步：添加生成器表达式
- 第五步：安装和测试
- 第六步：添加对测试仪表板的支持
- 第七步：添加系统自检
- 第八步：添加定制命令和生成文件
- 第九步：打包安装程序
- 第十步：选择静态库还是共享库（动态库）
- 第十一步：添加导出配置
- 第十二步：打包调试和发布

## 第一步：起点

### 练习1-构建一个项目

最基本的CMake项目是从单个源代码文件构建的可执行文件。对于像这种简单的项目，只需要一个包含三条命令的`CMakeLists.txt`文件就行了。

- `cmake_minimum_required()`
- `project()`
- `add_executable()`

> 注意：虽然CMake支持大写，小写以及大小写混合命令，但是我们更倾向于使用小写命令。

任何项目最顶层的`CMakeLists.txt`必须先指定该项目所需使用的最低版本，使用`cmake_minimum_required()`命令。这样确保接下来的CMake命令使用兼容版本的CMake运行。

我们使用`project()`命令设置项目名称。这是每个项目必须包含的命令，并且应该在`cmake_minimum_required()`命令之后立即被调用。我们之后会看到，这条命令还可以指定其它项目级别的信息例如编程语言和版本号。

最后，使用`add_executable()`命令告诉CMake去用指定的源文件创建一个可执行程序。

**构建并运行：**

在`Step1`文件夹中有`tutorial.cxx`,`CMakeLists.txt`文件。我们将通过下面的步骤去生成一个计算平方根的可执行程序。请完成`CMakeLists.txt`中的`TODO1`至`TODO3`。

完成上述三个`TODO`所要求的命令后,我们就可以去构建并运行我们的程序了。
> 注意：请确保你的电脑上安装了合适的CMake版本。

通过命令行，我们切换到git仓库的根目录,创建一个构建目录：

```bash
mkdir Step1_build
```

然后，切换到构建目录并运行`cmake`去配置项目并且生成本地构建系统：

```bash
cd Step1_build
cmake ../Step1
```

接着调用构建系统去编译链接项目程序：

```bash
cmake --build .
```

最后，尝试运行新构建出来的`Tutorial`程序吧。

### 练习2-指定C++标准

CMake有一些特殊的变量，它们